<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impulse Guardian Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-brand">
                <div class="brand-title">Impulse Guard</div>
                <div class="user-avatar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="#00d4ff" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                </div>
                <div class="user-name">Dashboard v2.0</div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                    Dashboard
                </a>
                <a href="#" class="nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                    </svg>
                    Purchases
                </a>
                <a href="#" class="nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                    </svg>
                    Savings
                </a>
                <a href="#" class="nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                    </svg>
                    Analytics
                </a>
                <a href="#" class="nav-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6m5.66-13.66l-4.24 4.24m0 6l4.24 4.24m5.66-9.9h-6m-6 0H1m13.66 5.66l-4.24-4.24m0-6l-4.24-4.24"/>
                    </svg>
                    Settings
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="dashboard-header">
                <h1>Guardian Control Center</h1>
                <p class="subtitle">Impulse Purchase Tracking System</p>
            </header>

            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#00d4ff" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Total Purchases</div>
                        <div class="stat-value" id="totalBattles">0</div>
                        <div class="stat-subtext" id="battlesSubtext">0 this week</div>
                    </div>
                </div>

                <div class="stat-card victory">
                    <div class="stat-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#48bb78" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Purchases Made</div>
                        <div class="stat-value" id="victories">0</div>
                        <div class="stat-subtext" id="victoriesSubtext">0% win rate</div>
                    </div>
                </div>

                <div class="stat-card defeat">
                    <div class="stat-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#f56565" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M12 17L2 12M22 12L12 17"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Resisted</div>
                        <div class="stat-value" id="defeats">0</div>
                        <div class="stat-subtext" id="defeatsSubtext">0% save rate</div>
                    </div>
                </div>

                <div class="stat-card money">
                    <div class="stat-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#ed8936" stroke-width="2">
                            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Money Saved</div>
                        <div class="stat-value" id="moneySaved">$0.00</div>
                        <div class="stat-subtext" id="savingsSubtext">$0.00/day avg</div>
                    </div>
                </div>

                <div class="stat-card special">
                    <div class="stat-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#9f7aea" stroke-width="2">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Avg. Purchase</div>
                        <div class="stat-value" id="avgBattle">$0.00</div>
                        <div class="stat-subtext" id="avgBattleSubtext">per attempt</div>
                    </div>
                </div>
            </div>

            <!-- Advanced Analytics Grid -->
            <div class="analytics-grid">
                <div class="analytics-card">
                    <div class="analytics-label">Current Streak</div>
                    <div class="analytics-value" id="currentStreak">0</div>
                    <div class="analytics-trend" id="streakTrend">consecutive saves</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-label">Biggest Save</div>
                    <div class="analytics-value" id="biggestSave">$0.00</div>
                    <div class="analytics-trend">single transaction</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-label">Success Rate</div>
                    <div class="analytics-value" id="successRate">0%</div>
                    <div class="analytics-trend" id="successTrend">resistance metric</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-label">Daily Average</div>
                    <div class="analytics-value" id="dailyAvg">$0.00</div>
                    <div class="analytics-trend">saved per day</div>
                </div>
            </div>

            <!-- Radar Chart Section -->
            <div class="chart-section">
                <div class="chart-card">
                    <h2 class="chart-title">Purchase Category Analysis</h2>
                    <div class="chart-description">
                        Interactive radar chart showing your spending patterns across different categories.
                    </div>
                    <div id="radarChart"></div>
                </div>
            </div>

            <div class="chart-section">
                <div class="chart-card">
                    <h2 class="chart-title">Cumulative Savings Over Time</h2>
                    <div class="chart-description">
                        Track your financial discipline progress through purchase history.
                    </div>
                    <canvas id="savingsChart"></canvas>
                </div>
            </div>

            <div class="recent-battles">
                <h2 class="section-title">Recent Purchase Log</h2>
                <div id="recentBattlesList" class="battles-list">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <footer class="dashboard-footer">
                <p>System Status: Online | Data Synced</p>
                <button id="refreshButton" class="refresh-button">‚ü≤ Refresh Data</button>
            </footer>
        </main>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
