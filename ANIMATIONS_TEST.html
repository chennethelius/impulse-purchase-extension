<!DOCTYPE html>
<html>
<head>
  <title>Pokemon Showdown Animations Test</title>
  <link rel="stylesheet" href="extension/styles.css">
  <style>
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
    }

    .test-container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 40px;
      max-width: 900px;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
    }

    h1 {
      text-align: center;
      color: #1a1a1a;
      margin-bottom: 10px;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .buttons-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
      margin-bottom: 30px;
    }

    .test-btn {
      padding: 12px 16px;
      border: 2px solid transparent;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-size: 12px;
    }

    .test-btn.entrance {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .test-btn.entrance:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .test-btn.attack {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
    }

    .test-btn.attack:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(245, 87, 108, 0.4);
    }

    .test-btn.special {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
    }

    .test-btn.special:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(79, 172, 254, 0.4);
    }

    .animation-demo {
      background: rgba(0, 0, 0, 0.05);
      border: 2px solid rgba(102, 126, 234, 0.2);
      border-radius: 12px;
      padding: 60px 20px;
      margin: 20px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 300px;
      position: relative;
    }

    .demo-box {
      width: 100px;
      height: 100px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
    }

    .category {
      margin-bottom: 30px;
    }

    .category-title {
      font-size: 16px;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
      padding-bottom: 8px;
      border-bottom: 2px solid rgba(102, 126, 234, 0.2);
    }

    .info-box {
      background: rgba(79, 172, 254, 0.1);
      border-left: 4px solid #4facfe;
      padding: 12px;
      border-radius: 4px;
      font-size: 13px;
      color: #1a1a1a;
      margin-top: 20px;
      line-height: 1.6;
    }

    .info-box strong {
      color: #667eea;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>ðŸŽ® Pokemon Showdown Animation Test</h1>
    <p class="subtitle">Click buttons to preview animations</p>

    <!-- Entrance Animations -->
    <div class="category">
      <div class="category-title">ðŸš€ Entrance Animations</div>
      <div class="buttons-grid">
        <button class="test-btn entrance" onclick="testAnimation('pokemonEnter')">Pokemon Enter</button>
        <button class="test-btn entrance" onclick="testAnimation('userEnter')">User Enter</button>
        <button class="test-btn entrance" onclick="testAnimation('bounce')">Bounce</button>
      </div>
    </div>

    <!-- Attack Animations -->
    <div class="category">
      <div class="category-title">âš¡ Attack Animations</div>
      <div class="buttons-grid">
        <button class="test-btn attack" onclick="testAnimation('shake')">Shake</button>
        <button class="test-btn attack" onclick="testAnimation('slideAttack')">Slide Attack</button>
        <button class="test-btn attack" onclick="testAnimation('pulse')">Pulse</button>
      </div>
    </div>

    <!-- Status Animations -->
    <div class="category">
      <div class="category-title">âœ¨ Status Animations</div>
      <div class="buttons-grid">
        <button class="test-btn special" onclick="testAnimation('fadeOut')">Fade Out</button>
        <button class="test-btn special" onclick="testAnimation('spin')">Spin</button>
        <button class="test-btn special" onclick="testAnimation('flip')">Flip</button>
      </div>
    </div>

    <!-- Special Effects -->
    <div class="category">
      <div class="category-title">ðŸŒŸ Special Effects</div>
      <div class="buttons-grid">
        <button class="test-btn special" onclick="testAnimation('glow')">Glow</button>
        <button class="test-btn special" onclick="testAnimation('jiggle')">Jiggle</button>
      </div>
    </div>

    <!-- Animation Demo Area -->
    <div class="animation-demo">
      <div class="demo-box" id="demo-box">
        Demo
      </div>
    </div>

    <!-- Sequence Test -->
    <div class="category">
      <div class="category-title">ðŸŽ¬ Animation Sequences</div>
      <div class="buttons-grid">
        <button class="test-btn entrance" onclick="testSequence(['pokemonEnter', 'bounce'])">
          Entrance Sequence
        </button>
        <button class="test-btn attack" onclick="testSequence(['shake', 'pulse', 'spin'])">
          Battle Sequence
        </button>
        <button class="test-btn special" onclick="testSequence(['spin', 'pulse', 'fadeOut'])">
          Victory Sequence
        </button>
      </div>
    </div>

    <!-- Info -->
    <div class="info-box">
      <strong>ðŸ’¡ How it works:</strong><br>
      Each animation is triggered via the AnimationService. Click buttons above to see individual animations or sequences. In the actual extension, animations play automatically during different user interactions (entrance, sending message, winning impulse check, etc.).br>
      <br>
      <strong>ðŸŽ¨ Technical implementation:</strong><br>
      CSS keyframes + JavaScript orchestration. All animations are reusable and can be played individually or in sequences.
    </div>
  </div>

  <!-- Include Animation System -->
  <script>
    class AnimationService {
      constructor() {
        this.animations = new Map();
        this.currentAnimation = null;
      }

      registerAnimation(name, config) {
        this.animations.set(name, config);
      }

      async playAnimation(element, animationName, options = {}) {
        if (!element) {
          console.error("AnimationService: No element provided");
          return;
        }

        const animation = this.animations.get(animationName);
        if (!animation) {
          console.error(`AnimationService: Animation "${animationName}" not registered`);
          return;
        }

        this.currentAnimation = animationName;

        return new Promise((resolve) => {
          element.classList.add(`animate-${animationName}`);

          const handleAnimationEnd = () => {
            element.removeEventListener("animationend", handleAnimationEnd);
            element.classList.remove(`animate-${animationName}`);
            this.currentAnimation = null;
            resolve();
          };

          element.addEventListener("animationend", handleAnimationEnd);

          setTimeout(() => {
            element.removeEventListener("animationend", handleAnimationEnd);
            if (this.currentAnimation === animationName) {
              element.classList.remove(`animate-${animationName}`);
              this.currentAnimation = null;
              resolve();
            }
          }, animation.duration + 100);
        });
      }

      async playSequence(element, animationNames) {
        for (const name of animationNames) {
          await this.playAnimation(element, name);
        }
      }

      isAnimating() {
        return this.currentAnimation !== null;
      }
    }

    function registerPokemonAnimations(animService) {
      animService.registerAnimation("pokemonEnter", { duration: 600 });
      animService.registerAnimation("userEnter", { duration: 600 });
      animService.registerAnimation("bounce", { duration: 600 });
      animService.registerAnimation("shake", { duration: 400 });
      animService.registerAnimation("pulse", { duration: 600 });
      animService.registerAnimation("slideAttack", { duration: 500 });
      animService.registerAnimation("fadeOut", { duration: 300 });
      animService.registerAnimation("spin", { duration: 800 });
      animService.registerAnimation("flip", { duration: 400 });
      animService.registerAnimation("glow", { duration: 1000 });
      animService.registerAnimation("jiggle", { duration: 300 });
    }

    const animationService = new AnimationService();
    registerPokemonAnimations(animationService);

    function testAnimation(name) {
      const box = document.getElementById("demo-box");
      animationService.playAnimation(box, name);
    }

    function testSequence(names) {
      const box = document.getElementById("demo-box");
      animationService.playSequence(box, names);
    }
  </script>
</body>
</html>
